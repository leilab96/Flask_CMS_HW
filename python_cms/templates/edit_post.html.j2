{% extends "base.html.j2" %}
{% block title %}
  Edit Post
{% endblock %}
{% block headsource %}
  {{ ckeditor.load() }}
{% endblock %}
{% block content %}
  <h1>Edit Post</h1>
  <form action="{{ url_for('pages.edit_post', post_id=post.id) }}" method="POST" class="form-group" enctype="multipart/form-data">
    {{ form.csrf_token() }}
    <label for="title">{{ form.title.label }}</label>
    {{ form.title(class="form-input", placeholder="title") }}

    {% if form.errors.teaser_image is defined %}
      {% for error in form.errors.teaser_image %}
        <div class="toast toast-error">
          <button class="btn btn-clear float-right"></button>
          {{error}}
        </div>
      {% endfor %}
    {% endif %}

    {% if post.teaser_image%}
    <img src="/files/{{ post.teaser_image }}" class="img-responsive article-image-inner">
    <button id="deleteImageBtn" class="btn btn-delete" onclick="deleteImage()">Delete Image</button>
    <div id="fileInputContainer" class="hidden">
    <label for="teaser_image">{{ form.teaser_image.label }}</label>
    {{ form.teaser_image(class="form-input") }}
    </div>
    {% else %}
      <label for="teaser_image">{{ form.teaser_image.label}}</label>
      {{ form.teaser_image(class="form-input") }}
    {% endif %}
    <br> 

    <label for="body">{{ form.body.label }}</label>
    {{ form.body(class="form-input", placeholder="your article goes here", id='body') }}
    {{ form.submit(class="btn btn-primary input-group-btn float-right", id="savePost", value="Save Post") }}
    {{ ckeditor.config(name='body') }}

    <label class="form-switch">
      Promoted
      {{ form.promoted(class="form-input") }}
      <i class="form-icon"></i>
    </label>
  </form>
{% endblock %}
{% block bodysource %}
<script src="{{url_for('static', filename='post_function.js')}}"></script>
{% endblock %}
